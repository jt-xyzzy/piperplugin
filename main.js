/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ListenUp
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");
var import_child_process = require("child_process");

// utils/removeFormatting.ts
function removeAllFormatting(md, options) {
  options = options || {};
  options.listUnicodeChar = options.hasOwnProperty("listUnicodeChar") ? options.listUnicodeChar : false;
  options.stripListLeaders = options.hasOwnProperty("stripListLeaders") ? options.stripListLeaders : true;
  options.gfm = options.hasOwnProperty("gfm") ? options.gfm : true;
  options.useImgAltText = options.hasOwnProperty("useImgAltText") ? options.useImgAltText : true;
  options.abbr = options.hasOwnProperty("abbr") ? options.abbr : false;
  options.replaceLinksWithURL = options.hasOwnProperty("replaceLinksWithURL") ? options.replaceLinksWithURL : false;
  options.htmlTagsToSkip = options.hasOwnProperty("htmlTagsToSkip") ? options.htmlTagsToSkip : [];
  let output = md || "";
  output = output.replace(/^(-\s*?|\*\s*?|_\s*?){3,}\s*/gm, "");
  try {
    if (options.stripListLeaders) {
      if (options.listUnicodeChar)
        output = output.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm, options.listUnicodeChar + " $1");
      else
        output = output.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm, "$1");
    }
    if (options.gfm) {
      output = output.replace(/\n={2,}/g, "\n").replace(/~{3}.*\n/g, "").replace(/~~/g, "").replace(/`{3}.*\n/g, "");
    }
    if (options.abbr) {
      output = output.replace(/\*\[.*\]:.*\n/, "");
    }
    output = output.replace(/<[^>]*>/g, "");
    let htmlReplaceRegex = new RegExp("<[^>]*>", "g");
    if (options.htmlTagsToSkip.length > 0) {
      const joinedHtmlTagsToSkip = "(?!" + options.htmlTagsToSkip.join("|") + ")";
      htmlReplaceRegex = new RegExp(
        "<" + joinedHtmlTagsToSkip + "[^>]*>",
        "ig"
      );
    }
    output = output.replace(htmlReplaceRegex, "").replace(/^[=\-]{2,}\s*$/g, "").replace(/\[\^.+?\](\: .*?$)?/g, "").replace(/\s{0,2}\[.*?\]: .*?$/g, "").replace(/\!\[(.*?)\][\[\(].*?[\]\)]/g, options.useImgAltText ? "$1" : "").replace(/\[([^\]]*?)\][\[\(].*?[\]\)]/g, options.replaceLinksWithURL ? "$2" : "$1").replace(/^(\n)?\s{0,3}>\s?/gm, "$1").replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g, "").replace(/^(\n)?\s{0,}#{1,6}\s*( (.+))? +#+$|^(\n)?\s{0,}#{1,6}\s*( (.+))?$/gm, "$1$3$4$6").replace(/([\*]+)(\S)(.*?\S)??\1/g, "$2$3").replace(/(^|\W)([_]+)(\S)(.*?\S)??\2($|\W)/g, "$1$3$4$5").replace(/(`{3,})(.*?)\1/gm, "$2").replace(/`(.+?)`/g, "$1").replace(/~(.*?)~/g, "$1");
  } catch (e) {
    console.error(e);
    return md;
  }
  return output;
}

// utils/utils.ts
var import_obsidian = require("obsidian");
function getBasePath() {
  let adapter = this.app.vault.adapter;
  if (adapter instanceof import_obsidian.FileSystemAdapter) {
    return adapter.getBasePath();
  }
  return "~/";
}

// Settings.ts
var import_obsidian2 = require("obsidian");
var DEFAULT_SETTINGS = {
  customModelFilePath: "",
  customModelConfigFilePath: "",
  piperExecutableFilePath: "",
  shouldUseCustomModel: true
};
var SettingsTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    this.addSettingToSelectPiperExecutablePath(containerEl);
    this.addSettingToSelectModelFilePath(containerEl);
    this.addSettingToSelectModelConfigFilePath(containerEl);
  }
  addSettingToSelectModelFilePath(containerEl) {
    new import_obsidian2.Setting(containerEl).setName("Select custom model file").setDesc(`File that ends with .onnx`).addText((component) => {
      component.setDisabled(true);
      component.setValue(this.plugin.settings.customModelFilePath);
    }).addExtraButton((component) => {
      component.setIcon("folder-open");
      component.setTooltip("Select model");
      component.onClick(() => {
        electron.remote.dialog.showOpenDialog({
          properties: ["openFile"],
          title: "Select a model"
        }).then((result) => {
          if (result.canceled)
            return;
          this.plugin.settings.customModelFilePath = result.filePaths[0];
          this.plugin.saveSettings();
          this.display();
        });
      });
    });
  }
  addSettingToSelectModelConfigFilePath(containerEl) {
    new import_obsidian2.Setting(containerEl).setName("Select model config file").setDesc(`File that ends with .json`).addText((component) => {
      component.setDisabled(true);
      component.setValue(this.plugin.settings.customModelConfigFilePath);
    }).addExtraButton((component) => {
      component.setIcon("folder-open");
      component.setTooltip("Select model config");
      component.onClick(() => {
        electron.remote.dialog.showOpenDialog({
          properties: ["openFile"],
          title: "Select a model config"
        }).then((result) => {
          if (result.canceled)
            return;
          this.plugin.settings.customModelConfigFilePath = result.filePaths[0];
          this.plugin.saveSettings();
          this.display();
        });
      });
    });
  }
  addSettingsToChooseWhetherToUseCustomModelOrDefault(containerEl) {
    new import_obsidian2.Setting(containerEl).setName("Use custom model?").setDesc(`Turn this on if you want to use different voice model. Check this doc to understand more: DOC LINK`).addToggle((component) => {
      component.setValue(this.plugin.settings.shouldUseCustomModel);
      component.onChange((value) => {
        this.plugin.settings.shouldUseCustomModel = value;
        this.plugin.saveSettings();
        this.display();
      });
    });
  }
  addSettingToSelectPiperExecutablePath(containerEl) {
    new import_obsidian2.Setting(containerEl).setName("Select Piper executable file").setDesc(`This is required`).addText((component) => {
      component.setDisabled(true);
      component.setValue(this.plugin.settings.piperExecutableFilePath);
    }).addExtraButton((component) => {
      component.setIcon("folder-open");
      component.setTooltip("Select piper executable");
      component.onClick(() => {
        electron.remote.dialog.showOpenDialog({
          properties: ["openFile"],
          title: "Select piper executable"
        }).then((result) => {
          if (result.canceled)
            return;
          this.plugin.settings.piperExecutableFilePath = result.filePaths[0];
          this.plugin.saveSettings();
          this.display();
        });
      });
    });
  }
};

// main.ts
var ListenUp = class extends import_obsidian3.Plugin {
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new SettingsTab(this.app, this));
    this.addCommand({
      id: "convert-text-to-speech",
      name: "Convert text to speech",
      editorCallback: async (editor, _) => {
        const notice = new import_obsidian3.Notice(
          "Converting the text to natural speech, please wait..",
          0
        );
        const basePath = getBasePath();
        const currentFile = this.app.workspace.getActiveFile();
        const audioFileName = (
          // @ts-ignore
          (currentFile == null ? void 0 : currentFile.name.replaceAll(" ", "-")) + "-" + this.getRandomNumber() + ".wav"
        );
        const piperLocation = (0, import_obsidian3.normalizePath)(this.settings.piperExecutableFilePath);
        let modelPath = (0, import_obsidian3.normalizePath)(basePath + "/" + DEFAULT_SETTINGS.customModelFilePath);
        let modelConfigPath = (0, import_obsidian3.normalizePath)(basePath + "/" + DEFAULT_SETTINGS.customModelConfigFilePath);
        const outputFilePath = (0, import_obsidian3.normalizePath)(basePath + "/" + audioFileName);
        modelPath = (0, import_obsidian3.normalizePath)(this.settings.customModelFilePath);
        modelConfigPath = (0, import_obsidian3.normalizePath)(this.settings.customModelConfigFilePath);
        const piperCommand = `"${piperLocation}" --model "${modelPath}" --config "${modelConfigPath}" --output_file "${outputFilePath}" --sentence_silence 0.5 --length_scale 1`;
        let textToConvertToAudio = editor.getValue();
        const regExMatch = textToConvertToAudio.match(
          /{{listen}}([\s\S]*?){{\/listen}}/g
        );
        const userSelection = editor.getSelection();
        if (regExMatch !== null) {
          textToConvertToAudio = regExMatch.join(", ").replaceAll(/{{listen}}|{{\/listen}}/g, "");
        } else if (userSelection.length) {
          textToConvertToAudio = userSelection;
        }
        textToConvertToAudio = removeAllFormatting(
          textToConvertToAudio != null ? textToConvertToAudio : " ",
          {}
          // @ts-ignore
        ).replaceAll('"', '\\"');
        (0, import_child_process.exec)(
          `echo "${textToConvertToAudio}" | ${piperCommand}`,
          async (error) => {
            if (error) {
              console.error(`

error: ${error.message}`);
              notice.setMessage("Something went wrong. Please raise an issue on Github or Discord");
              return;
            }
            await (currentFile == null ? void 0 : currentFile.vault.append(
              currentFile,
              `![[${audioFileName}]] 

`
            ));
            setTimeout(() => {
              editor.setCursor(editor.lastLine());
              notice.hide();
            }, 200);
          }
        );
      }
    });
  }
  async onunload() {
  }
  getRandomNumber(min = 1e4, max = 99999) {
    return Math.floor(Math.random() * (max - min) + min);
  }
  async loadSettings() {
    const data = await this.loadData() || {};
    this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
  }
  /**
   * Save data to disk, stored in data.json in plugin folder
   */
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJ1dGlscy9yZW1vdmVGb3JtYXR0aW5nLnRzIiwgInV0aWxzL3V0aWxzLnRzIiwgIlNldHRpbmdzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge1xuXHRub3JtYWxpemVQYXRoLFxuXHROb3RpY2UsXG5cdFBsdWdpbixcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBleGVjIH0gZnJvbSBcImNoaWxkX3Byb2Nlc3NcIjtcbmltcG9ydCB7IHJlbW92ZUFsbEZvcm1hdHRpbmcgfSBmcm9tIFwidXRpbHMvcmVtb3ZlRm9ybWF0dGluZ1wiO1xuaW1wb3J0IHsgZ2V0QmFzZVBhdGggfSBmcm9tIFwidXRpbHMvdXRpbHNcIjtcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MsIFNldHRpbmdzVGFiIH0gZnJvbSBcIlNldHRpbmdzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpc3RlblVwIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IGFueTtcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNldHRpbmdzVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiY29udmVydC10ZXh0LXRvLXNwZWVjaFwiLFxuXHRcdFx0bmFtZTogXCJDb252ZXJ0IHRleHQgdG8gc3BlZWNoXCIsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogYXN5bmMgKGVkaXRvciwgXykgPT4ge1xuXHRcdFx0XHRjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKFxuXHRcdFx0XHRcdFwiQ29udmVydGluZyB0aGUgdGV4dCB0byBuYXR1cmFsIHNwZWVjaCwgcGxlYXNlIHdhaXQuLlwiLFxuXHRcdFx0XHRcdDBcblx0XHRcdFx0KTtcblxuXHRcdFx0XHRjb25zdCBiYXNlUGF0aCA9IGdldEJhc2VQYXRoKCk7XG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRcdFx0Y29uc3QgYXVkaW9GaWxlTmFtZSA9XG5cdFx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRcdGN1cnJlbnRGaWxlPy5uYW1lLnJlcGxhY2VBbGwoXCIgXCIsIFwiLVwiKSArXG5cdFx0XHRcdFx0XCItXCIgK1xuXHRcdFx0XHRcdHRoaXMuZ2V0UmFuZG9tTnVtYmVyKCkgK1xuXHRcdFx0XHRcdFwiLndhdlwiO1xuXG5cdFx0XHRcdGNvbnN0IHBpcGVyTG9jYXRpb24gPSBub3JtYWxpemVQYXRoKHRoaXMuc2V0dGluZ3MucGlwZXJFeGVjdXRhYmxlRmlsZVBhdGgpO1xuXHRcdFx0XHRsZXQgbW9kZWxQYXRoID0gbm9ybWFsaXplUGF0aChiYXNlUGF0aCArICcvJyArIERFRkFVTFRfU0VUVElOR1MuY3VzdG9tTW9kZWxGaWxlUGF0aCk7XG5cdFx0XHRcdGxldCBtb2RlbENvbmZpZ1BhdGggPVxuXHRcdFx0XHRcdG5vcm1hbGl6ZVBhdGgoYmFzZVBhdGggKyAnLycgKyBERUZBVUxUX1NFVFRJTkdTLmN1c3RvbU1vZGVsQ29uZmlnRmlsZVBhdGgpO1xuXG5cdFx0XHRcdGNvbnN0IG91dHB1dEZpbGVQYXRoID0gbm9ybWFsaXplUGF0aChiYXNlUGF0aCArICcvJyArIGF1ZGlvRmlsZU5hbWUpXG5cblx0XHRcdFx0Ly8gaWYgKHRoaXMuc2V0dGluZ3Muc2hvdWxkVXNlQ3VzdG9tTW9kZWwpIHtcblx0XHRcdFx0XHRtb2RlbFBhdGggPSBub3JtYWxpemVQYXRoKHRoaXMuc2V0dGluZ3MuY3VzdG9tTW9kZWxGaWxlUGF0aCk7XG5cdFx0XHRcdFx0bW9kZWxDb25maWdQYXRoID0gbm9ybWFsaXplUGF0aCh0aGlzLnNldHRpbmdzLmN1c3RvbU1vZGVsQ29uZmlnRmlsZVBhdGgpO1xuXHRcdFx0XHQvLyB9XG5cblx0XHRcdFx0Y29uc3QgcGlwZXJDb21tYW5kID0gYFwiJHtwaXBlckxvY2F0aW9ufVwiIC0tbW9kZWwgXCIke21vZGVsUGF0aH1cIiAtLWNvbmZpZyBcIiR7bW9kZWxDb25maWdQYXRofVwiIC0tb3V0cHV0X2ZpbGUgXCIke291dHB1dEZpbGVQYXRofVwiIC0tc2VudGVuY2Vfc2lsZW5jZSAwLjUgLS1sZW5ndGhfc2NhbGUgMWA7XG5cblx0XHRcdFx0bGV0IHRleHRUb0NvbnZlcnRUb0F1ZGlvID0gZWRpdG9yLmdldFZhbHVlKCk7XG5cdFx0XHRcdGNvbnN0IHJlZ0V4TWF0Y2ggPSB0ZXh0VG9Db252ZXJ0VG9BdWRpby5tYXRjaChcblx0XHRcdFx0XHQve3tsaXN0ZW59fShbXFxzXFxTXSo/KXt7XFwvbGlzdGVufX0vZ1xuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGNvbnN0IHVzZXJTZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG5cblx0XHRcdFx0aWYgKHJlZ0V4TWF0Y2ggIT09IG51bGwpIHtcblx0XHRcdFx0XHR0ZXh0VG9Db252ZXJ0VG9BdWRpbyA9IHJlZ0V4TWF0Y2hcblx0XHRcdFx0XHRcdC5qb2luKFwiLCBcIilcblx0XHRcdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0XHRcdC5yZXBsYWNlQWxsKC97e2xpc3Rlbn19fHt7XFwvbGlzdGVufX0vZywgXCJcIik7XG5cdFx0XHRcdH0gZWxzZSBpZiAodXNlclNlbGVjdGlvbi5sZW5ndGgpIHtcblx0XHRcdFx0XHR0ZXh0VG9Db252ZXJ0VG9BdWRpbyA9IHVzZXJTZWxlY3Rpb247XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0ZXh0VG9Db252ZXJ0VG9BdWRpbyA9IHJlbW92ZUFsbEZvcm1hdHRpbmcoXG5cdFx0XHRcdFx0dGV4dFRvQ29udmVydFRvQXVkaW8gPz8gXCIgXCIsXG5cdFx0XHRcdFx0e31cblx0XHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdCkucmVwbGFjZUFsbCgnXCInLCAnXFxcXFwiJyk7XG5cblx0XHRcdFx0ZXhlYyhcblx0XHRcdFx0XHRgZWNobyBcIiR7dGV4dFRvQ29udmVydFRvQXVkaW99XCIgfCAke3BpcGVyQ29tbWFuZH1gLFxuXHRcdFx0XHRcdGFzeW5jIChlcnJvcikgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoYFxcblxcbmVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG5cdFx0XHRcdFx0XHRcdG5vdGljZS5zZXRNZXNzYWdlKFwiU29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSByYWlzZSBhbiBpc3N1ZSBvbiBHaXRodWIgb3IgRGlzY29yZFwiKVxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGF3YWl0IGN1cnJlbnRGaWxlPy52YXVsdC5hcHBlbmQoXG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRGaWxlLFxuXHRcdFx0XHRcdFx0XHRgIVtbJHthdWRpb0ZpbGVOYW1lfV1dIFxcblxcbmBcblx0XHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKGVkaXRvci5sYXN0TGluZSgpKTtcblx0XHRcdFx0XHRcdFx0bm90aWNlLmhpZGUoKTtcblx0XHRcdFx0XHRcdH0sIDIwMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHR9XG5cblx0YXN5bmMgb251bmxvYWQoKSB7XG5cdC8vIFJlbGVhc2UgYW55IHJlc291cmNlcyBjb25maWd1cmVkIGJ5IHRoZSBwbHVnaW4uXG5cdH1cblxuXHRnZXRSYW5kb21OdW1iZXIobWluOiBudW1iZXIgPSAxMDAwMCwgbWF4OiBudW1iZXIgPSA5OTk5OSkge1xuXHRcdHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSArIG1pbik7XG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0Y29uc3QgZGF0YSA9IChhd2FpdCB0aGlzLmxvYWREYXRhKCkpIHx8IHt9O1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBkYXRhKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBTYXZlIGRhdGEgdG8gZGlzaywgc3RvcmVkIGluIGRhdGEuanNvbiBpbiBwbHVnaW4gZm9sZGVyXG5cdCAqL1xuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxufVxuIiwgImV4cG9ydCBmdW5jdGlvbiByZW1vdmVBbGxGb3JtYXR0aW5nKG1kOiBzdHJpbmcsIG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pIHtcblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdG9wdGlvbnMubGlzdFVuaWNvZGVDaGFyID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnbGlzdFVuaWNvZGVDaGFyJykgPyBvcHRpb25zLmxpc3RVbmljb2RlQ2hhciA6IGZhbHNlO1xuXHRvcHRpb25zLnN0cmlwTGlzdExlYWRlcnMgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdzdHJpcExpc3RMZWFkZXJzJykgPyBvcHRpb25zLnN0cmlwTGlzdExlYWRlcnMgOiB0cnVlO1xuXHRvcHRpb25zLmdmbSA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2dmbScpID8gb3B0aW9ucy5nZm0gOiB0cnVlO1xuXHRvcHRpb25zLnVzZUltZ0FsdFRleHQgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCd1c2VJbWdBbHRUZXh0JykgPyBvcHRpb25zLnVzZUltZ0FsdFRleHQgOiB0cnVlO1xuXHRvcHRpb25zLmFiYnIgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdhYmJyJykgPyBvcHRpb25zLmFiYnIgOiBmYWxzZTtcblx0b3B0aW9ucy5yZXBsYWNlTGlua3NXaXRoVVJMID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgncmVwbGFjZUxpbmtzV2l0aFVSTCcpID8gb3B0aW9ucy5yZXBsYWNlTGlua3NXaXRoVVJMIDogZmFsc2U7XG5cdG9wdGlvbnMuaHRtbFRhZ3NUb1NraXAgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdodG1sVGFnc1RvU2tpcCcpID8gb3B0aW9ucy5odG1sVGFnc1RvU2tpcCA6IFtdO1xuXG5cdGxldCBvdXRwdXQgPSBtZCB8fCAnJztcblxuXHQvLyBSZW1vdmUgaG9yaXpvbnRhbCBydWxlcyAoc3RyaXBMaXN0SGVhZGVycyBjb25mbGljdCB3aXRoIHRoaXMgcnVsZSwgd2hpY2ggaXMgd2h5IGl0IGhhcyBiZWVuIG1vdmVkIHRvIHRoZSB0b3ApXG5cdG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKC9eKC1cXHMqP3xcXCpcXHMqP3xfXFxzKj8pezMsfVxccyovZ20sICcnKTtcblxuXHR0cnkge1xuXHRcdGlmIChvcHRpb25zLnN0cmlwTGlzdExlYWRlcnMpIHtcblx0XHRcdGlmIChvcHRpb25zLmxpc3RVbmljb2RlQ2hhcilcblx0XHRcdFx0b3V0cHV0ID0gb3V0cHV0LnJlcGxhY2UoL14oW1xcc1xcdF0qKShbXFwqXFwtXFwrXXxcXGQrXFwuKVxccysvZ20sIG9wdGlvbnMubGlzdFVuaWNvZGVDaGFyICsgJyAkMScpO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHRvdXRwdXQgPSBvdXRwdXQucmVwbGFjZSgvXihbXFxzXFx0XSopKFtcXCpcXC1cXCtdfFxcZCtcXC4pXFxzKy9nbSwgJyQxJyk7XG5cdFx0fVxuXHRcdGlmIChvcHRpb25zLmdmbSkge1xuXHRcdFx0b3V0cHV0ID0gb3V0cHV0XG5cdFx0XHRcdC8vIEhlYWRlclxuXHRcdFx0XHQucmVwbGFjZSgvXFxuPXsyLH0vZywgJ1xcbicpXG5cdFx0XHRcdC8vIEZlbmNlZCBjb2RlYmxvY2tzXG5cdFx0XHRcdC5yZXBsYWNlKC9+ezN9LipcXG4vZywgJycpXG5cdFx0XHRcdC8vIFN0cmlrZXRocm91Z2hcblx0XHRcdFx0LnJlcGxhY2UoL35+L2csICcnKVxuXHRcdFx0XHQvLyBGZW5jZWQgY29kZWJsb2Nrc1xuXHRcdFx0XHQucmVwbGFjZSgvYHszfS4qXFxuL2csICcnKTtcblx0XHR9XG5cdFx0aWYgKG9wdGlvbnMuYWJicikge1xuXHRcdFx0Ly8gUmVtb3ZlIGFiYnJldmlhdGlvbnNcblx0XHRcdG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKC9cXCpcXFsuKlxcXTouKlxcbi8sICcnKTtcblx0XHR9XG5cdFx0b3V0cHV0ID0gb3V0cHV0XG5cdFx0XHQvLyBSZW1vdmUgSFRNTCB0YWdzXG5cdFx0XHQucmVwbGFjZSgvPFtePl0qPi9nLCAnJylcblxuXHRcdGxldCBodG1sUmVwbGFjZVJlZ2V4ID0gbmV3IFJlZ0V4cCgnPFtePl0qPicsICdnJyk7XG5cdFx0aWYgKG9wdGlvbnMuaHRtbFRhZ3NUb1NraXAubGVuZ3RoID4gMCkge1xuXHRcdFx0Ly8gVXNpbmcgbmVnYXRpdmUgbG9va2FoZWFkLiBFZy4gKD8hc3VwfHN1Yikgd2lsbCBub3QgbWF0Y2ggJ3N1cCcgYW5kICdzdWInIHRhZ3MuXG5cdFx0XHRjb25zdCBqb2luZWRIdG1sVGFnc1RvU2tpcCA9ICcoPyEnICsgb3B0aW9ucy5odG1sVGFnc1RvU2tpcC5qb2luKFwifFwiKSArICcpJztcblxuXHRcdFx0Ly8gQWRkaW5nIHRoZSBsb29rYWhlYWQgbGl0ZXJhbCB3aXRoIHRoZSBkZWZhdWx0IHJlZ2V4IGZvciBodG1sLiBFZy4vPCg/IXN1cHxzdWIpW14+XSo+L2lnXG5cdFx0XHRodG1sUmVwbGFjZVJlZ2V4ID0gbmV3IFJlZ0V4cChcblx0XHRcdFx0JzwnICtcblx0XHRcdFx0am9pbmVkSHRtbFRhZ3NUb1NraXAgK1xuXHRcdFx0XHQnW14+XSo+Jyxcblx0XHRcdFx0J2lnJ1xuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRvdXRwdXQgPSBvdXRwdXRcblx0XHRcdC8vIFJlbW92ZSBIVE1MIHRhZ3Ncblx0XHRcdC5yZXBsYWNlKGh0bWxSZXBsYWNlUmVnZXgsICcnKVxuXHRcdFx0Ly8gUmVtb3ZlIHNldGV4dC1zdHlsZSBoZWFkZXJzXG5cdFx0XHQucmVwbGFjZSgvXls9XFwtXXsyLH1cXHMqJC9nLCAnJylcblx0XHRcdC8vIFJlbW92ZSBmb290bm90ZXM/XG5cdFx0XHQucmVwbGFjZSgvXFxbXFxeLis/XFxdKFxcOiAuKj8kKT8vZywgJycpXG5cdFx0XHQucmVwbGFjZSgvXFxzezAsMn1cXFsuKj9cXF06IC4qPyQvZywgJycpXG5cdFx0XHQvLyBSZW1vdmUgaW1hZ2VzXG5cdFx0XHQucmVwbGFjZSgvXFwhXFxbKC4qPylcXF1bXFxbXFwoXS4qP1tcXF1cXCldL2csIG9wdGlvbnMudXNlSW1nQWx0VGV4dCA/ICckMScgOiAnJylcblx0XHRcdC8vIFJlbW92ZSBpbmxpbmUgbGlua3Ncblx0XHRcdC5yZXBsYWNlKC9cXFsoW15cXF1dKj8pXFxdW1xcW1xcKF0uKj9bXFxdXFwpXS9nLCBvcHRpb25zLnJlcGxhY2VMaW5rc1dpdGhVUkwgPyAnJDInIDogJyQxJylcblx0XHRcdC8vIFJlbW92ZSBibG9ja3F1b3Rlc1xuXHRcdFx0LnJlcGxhY2UoL14oXFxuKT9cXHN7MCwzfT5cXHM/L2dtLCAnJDEnKVxuXHRcdFx0Ly8gLnJlcGxhY2UoLyhefFxcbilcXHN7MCwzfT5cXHM/L2csICdcXG5cXG4nKVxuXHRcdFx0Ly8gUmVtb3ZlIHJlZmVyZW5jZS1zdHlsZSBsaW5rcz9cblx0XHRcdC5yZXBsYWNlKC9eXFxzezEsMn1cXFsoLio/KVxcXTogKFxcUyspKCBcIi4qP1wiKT9cXHMqJC9nLCAnJylcblx0XHRcdC8vIFJlbW92ZSBhdHgtc3R5bGUgaGVhZGVyc1xuXHRcdFx0LnJlcGxhY2UoL14oXFxuKT9cXHN7MCx9I3sxLDZ9XFxzKiggKC4rKSk/ICsjKyR8XihcXG4pP1xcc3swLH0jezEsNn1cXHMqKCAoLispKT8kL2dtLCAnJDEkMyQ0JDYnKVxuXHRcdFx0Ly8gUmVtb3ZlICogZW1waGFzaXNcblx0XHRcdC5yZXBsYWNlKC8oW1xcKl0rKShcXFMpKC4qP1xcUyk/P1xcMS9nLCAnJDIkMycpXG5cdFx0XHQvLyBSZW1vdmUgXyBlbXBoYXNpcy4gVW5saWtlICosIF8gZW1waGFzaXMgZ2V0cyByZW5kZXJlZCBvbmx5IGlmIFxuXHRcdFx0Ly8gICAxLiBFaXRoZXIgdGhlcmUgaXMgYSB3aGl0ZXNwYWNlIGNoYXJhY3RlciBiZWZvcmUgb3BlbmluZyBfIGFuZCBhZnRlciBjbG9zaW5nIF8uXG5cdFx0XHQvLyAgIDIuIE9yIF8gaXMgYXQgdGhlIHN0YXJ0L2VuZCBvZiB0aGUgc3RyaW5nLlxuXHRcdFx0LnJlcGxhY2UoLyhefFxcVykoW19dKykoXFxTKSguKj9cXFMpPz9cXDIoJHxcXFcpL2csICckMSQzJDQkNScpXG5cdFx0XHQvLyBSZW1vdmUgY29kZSBibG9ja3Ncblx0XHRcdC5yZXBsYWNlKC8oYHszLH0pKC4qPylcXDEvZ20sICckMicpXG5cdFx0XHQvLyBSZW1vdmUgaW5saW5lIGNvZGVcblx0XHRcdC5yZXBsYWNlKC9gKC4rPylgL2csICckMScpXG5cdFx0XHQvLyAvLyBSZXBsYWNlIHR3byBvciBtb3JlIG5ld2xpbmVzIHdpdGggZXhhY3RseSB0d28/IE5vdCBlbnRpcmVseSBzdXJlIHRoaXMgYmVsb25ncyBoZXJlLi4uXG5cdFx0XHQvLyAucmVwbGFjZSgvXFxuezIsfS9nLCAnXFxuXFxuJylcblx0XHRcdC8vIC8vIFJlbW92ZSBuZXdsaW5lcyBpbiBhIHBhcmFncmFwaFxuXHRcdFx0Ly8gLnJlcGxhY2UoLyhcXFMrKVxcblxccyooXFxTKykvZywgJyQxICQyJylcblx0XHRcdC8vIFJlcGxhY2Ugc3RyaWtlIHRocm91Z2hcblx0XHRcdC5yZXBsYWNlKC9+KC4qPyl+L2csICckMScpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0Y29uc29sZS5lcnJvcihlKTtcblx0XHRyZXR1cm4gbWQ7XG5cdH1cblx0cmV0dXJuIG91dHB1dDtcbn07XG4iLCAiaW1wb3J0IHsgRmlsZVN5c3RlbUFkYXB0ZXIgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEJhc2VQYXRoKCkge1xuXHRsZXQgYWRhcHRlciA9IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXI7XG5cdGlmIChhZGFwdGVyIGluc3RhbmNlb2YgRmlsZVN5c3RlbUFkYXB0ZXIpIHtcblx0XHRyZXR1cm4gYWRhcHRlci5nZXRCYXNlUGF0aCgpO1xuXHR9XG5cdHJldHVybiBcIn4vXCI7XG59XG4iLCAiaW1wb3J0IExpc3RlblVwIGZyb20gXCJtYWluXCI7XG5pbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIG5vcm1hbGl6ZVBhdGggfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGludGVyZmFjZSBMaXN0ZW5VcFNldHRpbmdzVGFiIHtcblx0Y3VzdG9tTW9kZWxGaWxlUGF0aDogc3RyaW5nO1xuXHRjdXN0b21Nb2RlbENvbmZpZ0ZpbGVQYXRoOiBzdHJpbmc7XG5cdHBpcGVyRXhlY3V0YWJsZUZpbGVQYXRoOiBzdHJpbmc7XG5cdHNob3VsZFVzZUN1c3RvbU1vZGVsOiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTGlzdGVuVXBTZXR0aW5nc1RhYiA9IHtcblx0Y3VzdG9tTW9kZWxGaWxlUGF0aDogXCJcIixcblx0Y3VzdG9tTW9kZWxDb25maWdGaWxlUGF0aDogXCJcIixcblx0cGlwZXJFeGVjdXRhYmxlRmlsZVBhdGg6IFwiXCIsXG5cdHNob3VsZFVzZUN1c3RvbU1vZGVsOiB0cnVlLFxufTtcblxuZXhwb3J0IGNsYXNzIFNldHRpbmdzVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogTGlzdGVuVXA7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTGlzdGVuVXApIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCkge1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RvU2VsZWN0UGlwZXJFeGVjdXRhYmxlUGF0aChjb250YWluZXJFbCk7XG5cdFx0Ly8gdGhpcy5hZGRTZXR0aW5nc1RvQ2hvb3NlV2hldGhlclRvVXNlQ3VzdG9tTW9kZWxPckRlZmF1bHQoY29udGFpbmVyRWwpO1xuXHRcdC8vIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG91bGRVc2VDdXN0b21Nb2RlbCkge1xuXHRcdFx0dGhpcy5hZGRTZXR0aW5nVG9TZWxlY3RNb2RlbEZpbGVQYXRoKGNvbnRhaW5lckVsKTtcblx0XHRcdHRoaXMuYWRkU2V0dGluZ1RvU2VsZWN0TW9kZWxDb25maWdGaWxlUGF0aChjb250YWluZXJFbCk7XG5cdFx0Ly8gfVxuXHR9XG5cblx0YWRkU2V0dGluZ1RvU2VsZWN0TW9kZWxGaWxlUGF0aChjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiU2VsZWN0IGN1c3RvbSBtb2RlbCBmaWxlXCIpXG5cdFx0XHQuc2V0RGVzYyhgRmlsZSB0aGF0IGVuZHMgd2l0aCAub25ueGApXG5cdFx0XHQuYWRkVGV4dCgoY29tcG9uZW50KSA9PiB7XG5cdFx0XHRcdGNvbXBvbmVudC5zZXREaXNhYmxlZCh0cnVlKTtcblx0XHRcdFx0Y29tcG9uZW50LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbU1vZGVsRmlsZVBhdGgpO1xuXHRcdFx0fSlcblx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PiB7XG5cdFx0XHRcdGNvbXBvbmVudC5zZXRJY29uKFwiZm9sZGVyLW9wZW5cIik7XG5cdFx0XHRcdGNvbXBvbmVudC5zZXRUb29sdGlwKFwiU2VsZWN0IG1vZGVsXCIpO1xuXG5cdFx0XHRcdGNvbXBvbmVudC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdFx0ZWxlY3Ryb24ucmVtb3RlLmRpYWxvZ1xuXHRcdFx0XHRcdFx0LnNob3dPcGVuRGlhbG9nKHtcblx0XHRcdFx0XHRcdFx0cHJvcGVydGllczogW1wib3BlbkZpbGVcIl0sXG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcIlNlbGVjdCBhIG1vZGVsXCIsXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0LnRoZW4oKHJlc3VsdDogYW55KSA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmIChyZXN1bHQuY2FuY2VsZWQpIHJldHVybjtcblxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21Nb2RlbEZpbGVQYXRoID0gcmVzdWx0LmZpbGVQYXRoc1swXTtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdH1cblxuXHRhZGRTZXR0aW5nVG9TZWxlY3RNb2RlbENvbmZpZ0ZpbGVQYXRoKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJTZWxlY3QgbW9kZWwgY29uZmlnIGZpbGVcIilcblx0XHRcdC5zZXREZXNjKGBGaWxlIHRoYXQgZW5kcyB3aXRoIC5qc29uYClcblx0XHRcdC5hZGRUZXh0KChjb21wb25lbnQpID0+IHtcblx0XHRcdFx0Y29tcG9uZW50LnNldERpc2FibGVkKHRydWUpO1xuXHRcdFx0XHRjb21wb25lbnQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tTW9kZWxDb25maWdGaWxlUGF0aCk7XG5cdFx0XHR9KVxuXHRcdFx0LmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+IHtcblx0XHRcdFx0Y29tcG9uZW50LnNldEljb24oXCJmb2xkZXItb3BlblwiKTtcblx0XHRcdFx0Y29tcG9uZW50LnNldFRvb2x0aXAoXCJTZWxlY3QgbW9kZWwgY29uZmlnXCIpO1xuXG5cdFx0XHRcdGNvbXBvbmVudC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdFx0ZWxlY3Ryb24ucmVtb3RlLmRpYWxvZ1xuXHRcdFx0XHRcdFx0LnNob3dPcGVuRGlhbG9nKHtcblx0XHRcdFx0XHRcdFx0cHJvcGVydGllczogW1wib3BlbkZpbGVcIl0sXG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcIlNlbGVjdCBhIG1vZGVsIGNvbmZpZ1wiLFxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdC50aGVuKChyZXN1bHQ6IGFueSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZiAocmVzdWx0LmNhbmNlbGVkKSByZXR1cm47XG5cblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tTW9kZWxDb25maWdGaWxlUGF0aCA9IHJlc3VsdC5maWxlUGF0aHNbMF07XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHR9XG5cblx0YWRkU2V0dGluZ3NUb0Nob29zZVdoZXRoZXJUb1VzZUN1c3RvbU1vZGVsT3JEZWZhdWx0KGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJVc2UgY3VzdG9tIG1vZGVsP1wiKVxuXHRcdFx0LnNldERlc2MoYFR1cm4gdGhpcyBvbiBpZiB5b3Ugd2FudCB0byB1c2UgZGlmZmVyZW50IHZvaWNlIG1vZGVsLiBDaGVjayB0aGlzIGRvYyB0byB1bmRlcnN0YW5kIG1vcmU6IERPQyBMSU5LYClcblx0XHRcdC5hZGRUb2dnbGUoKGNvbXBvbmVudCkgPT4ge1xuXHRcdFx0XHRjb21wb25lbnQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvdWxkVXNlQ3VzdG9tTW9kZWwpO1xuXHRcdFx0XHRjb21wb25lbnQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvdWxkVXNlQ3VzdG9tTW9kZWwgPSB2YWx1ZTtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHR9XG5cblx0YWRkU2V0dGluZ1RvU2VsZWN0UGlwZXJFeGVjdXRhYmxlUGF0aChjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiU2VsZWN0IFBpcGVyIGV4ZWN1dGFibGUgZmlsZVwiKVxuXHRcdFx0LnNldERlc2MoYFRoaXMgaXMgcmVxdWlyZWRgKVxuXHRcdFx0LmFkZFRleHQoKGNvbXBvbmVudCkgPT4ge1xuXHRcdFx0XHRjb21wb25lbnQuc2V0RGlzYWJsZWQodHJ1ZSk7XG5cdFx0XHRcdGNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5waXBlckV4ZWN1dGFibGVGaWxlUGF0aCk7XG5cdFx0XHR9KVxuXHRcdFx0LmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+IHtcblx0XHRcdFx0Y29tcG9uZW50LnNldEljb24oXCJmb2xkZXItb3BlblwiKTtcblx0XHRcdFx0Y29tcG9uZW50LnNldFRvb2x0aXAoXCJTZWxlY3QgcGlwZXIgZXhlY3V0YWJsZVwiKTtcblx0XHRcdFx0Y29tcG9uZW50Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0XHRlbGVjdHJvbi5yZW1vdGUuZGlhbG9nXG5cdFx0XHRcdFx0XHQuc2hvd09wZW5EaWFsb2coe1xuXHRcdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiBbXCJvcGVuRmlsZVwiXSxcblx0XHRcdFx0XHRcdFx0dGl0bGU6IFwiU2VsZWN0IHBpcGVyIGV4ZWN1dGFibGVcIixcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQudGhlbigocmVzdWx0OiBhbnkpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKHJlc3VsdC5jYW5jZWxlZCkgcmV0dXJuO1xuXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnBpcGVyRXhlY3V0YWJsZUZpbGVQYXRoID0gcmVzdWx0LmZpbGVQYXRoc1swXTtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxtQkFJTztBQUNQLDJCQUFxQjs7O0FDTGQsU0FBUyxvQkFBb0IsSUFBWSxTQUFpQztBQUNoRixZQUFVLFdBQVcsQ0FBQztBQUN0QixVQUFRLGtCQUFrQixRQUFRLGVBQWUsaUJBQWlCLElBQUksUUFBUSxrQkFBa0I7QUFDaEcsVUFBUSxtQkFBbUIsUUFBUSxlQUFlLGtCQUFrQixJQUFJLFFBQVEsbUJBQW1CO0FBQ25HLFVBQVEsTUFBTSxRQUFRLGVBQWUsS0FBSyxJQUFJLFFBQVEsTUFBTTtBQUM1RCxVQUFRLGdCQUFnQixRQUFRLGVBQWUsZUFBZSxJQUFJLFFBQVEsZ0JBQWdCO0FBQzFGLFVBQVEsT0FBTyxRQUFRLGVBQWUsTUFBTSxJQUFJLFFBQVEsT0FBTztBQUMvRCxVQUFRLHNCQUFzQixRQUFRLGVBQWUscUJBQXFCLElBQUksUUFBUSxzQkFBc0I7QUFDNUcsVUFBUSxpQkFBaUIsUUFBUSxlQUFlLGdCQUFnQixJQUFJLFFBQVEsaUJBQWlCLENBQUM7QUFFOUYsTUFBSSxTQUFTLE1BQU07QUFHbkIsV0FBUyxPQUFPLFFBQVEsa0NBQWtDLEVBQUU7QUFFNUQsTUFBSTtBQUNILFFBQUksUUFBUSxrQkFBa0I7QUFDN0IsVUFBSSxRQUFRO0FBQ1gs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LFNBQVMsQ0FBQztBQUNsQyxxQkFBTyxLQUFLO0FBQUEsWUFDYixHQUFHLEdBQUc7QUFBQSxVQUNQO0FBQUEsUUFDRDtBQUFBLE1BQ0Q7QUFBQSxJQUNELENBQUM7QUFBQSxFQUVGO0FBQUEsRUFFQSxNQUFNLFdBQVc7QUFBQSxFQUVqQjtBQUFBLEVBRUEsZ0JBQWdCLE1BQWMsS0FBTyxNQUFjLE9BQU87QUFDekQsV0FBTyxLQUFLLE1BQU0sS0FBSyxPQUFPLEtBQUssTUFBTSxPQUFPLEdBQUc7QUFBQSxFQUNwRDtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ3BCLFVBQU0sT0FBUSxNQUFNLEtBQUssU0FBUyxLQUFNLENBQUM7QUFDekMsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLElBQUk7QUFBQSxFQUN6RDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBTSxlQUFlO0FBQ3BCLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLEVBQ2xDO0FBQ0Q7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iXQp9Cg==
