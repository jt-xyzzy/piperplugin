/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ListenUp
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");
var import_child_process = require("child_process");

// utils/removeFormatting.ts
function removeAllFormatting(md, options) {
  options = options || {};
  options.listUnicodeChar = options.hasOwnProperty("listUnicodeChar") ? options.listUnicodeChar : false;
  options.stripListLeaders = options.hasOwnProperty("stripListLeaders") ? options.stripListLeaders : true;
  options.gfm = options.hasOwnProperty("gfm") ? options.gfm : true;
  options.useImgAltText = options.hasOwnProperty("useImgAltText") ? options.useImgAltText : true;
  options.abbr = options.hasOwnProperty("abbr") ? options.abbr : false;
  options.replaceLinksWithURL = options.hasOwnProperty("replaceLinksWithURL") ? options.replaceLinksWithURL : false;
  options.htmlTagsToSkip = options.hasOwnProperty("htmlTagsToSkip") ? options.htmlTagsToSkip : [];
  let output = md || "";
  output = output.replace(/^(-\s*?|\*\s*?|_\s*?){3,}\s*/gm, "");
  try {
    if (options.stripListLeaders) {
      if (options.listUnicodeChar)
        output = output.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm, options.listUnicodeChar + " $1");
      else
        output = output.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm, "$1");
    }
    if (options.gfm) {
      output = output.replace(/\n={2,}/g, "\n").replace(/~{3}.*\n/g, "").replace(/~~/g, "").replace(/`{3}.*\n/g, "");
    }
    if (options.abbr) {
      output = output.replace(/\*\[.*\]:.*\n/, "");
    }
    output = output.replace(/<[^>]*>/g, "");
    let htmlReplaceRegex = new RegExp("<[^>]*>", "g");
    if (options.htmlTagsToSkip.length > 0) {
      const joinedHtmlTagsToSkip = "(?!" + options.htmlTagsToSkip.join("|") + ")";
      htmlReplaceRegex = new RegExp(
        "<" + joinedHtmlTagsToSkip + "[^>]*>",
        "ig"
      );
    }
    output = output.replace(htmlReplaceRegex, "").replace(/^[=\-]{2,}\s*$/g, "").replace(/\[\^.+?\](\: .*?$)?/g, "").replace(/\s{0,2}\[.*?\]: .*?$/g, "").replace(/\!\[(.*?)\][\[\(].*?[\]\)]/g, options.useImgAltText ? "$1" : "").replace(/\[([^\]]*?)\][\[\(].*?[\]\)]/g, options.replaceLinksWithURL ? "$2" : "$1").replace(/^(\n)?\s{0,3}>\s?/gm, "$1").replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g, "").replace(/^(\n)?\s{0,}#{1,6}\s*( (.+))? +#+$|^(\n)?\s{0,}#{1,6}\s*( (.+))?$/gm, "$1$3$4$6").replace(/([\*]+)(\S)(.*?\S)??\1/g, "$2$3").replace(/(^|\W)([_]+)(\S)(.*?\S)??\2($|\W)/g, "$1$3$4$5").replace(/(`{3,})(.*?)\1/gm, "$2").replace(/`(.+?)`/g, "$1").replace(/~(.*?)~/g, "$1");
  } catch (e) {
    console.error(e);
    return md;
  }
  return output;
}

// utils/utils.ts
var import_obsidian = require("obsidian");
function getBasePath() {
  let adapter = this.app.vault.adapter;
  if (adapter instanceof import_obsidian.FileSystemAdapter) {
    return adapter.getBasePath();
  }
  return "~/";
}

// Settings.ts
var import_obsidian2 = require("obsidian");
var DEFAULT_SETTINGS = {
  customModelFilePath: "",
  customModelConfigFilePath: "",
  piperExecutableFilePath: "",
  shouldUseCustomModel: true
};
var SettingsTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    this.addSettingToSelectPiperExecutablePath(containerEl);
    this.addSettingToSelectModelFilePath(containerEl);
    this.addSettingToSelectModelConfigFilePath(containerEl);
  }
  addSettingToSelectModelFilePath(containerEl) {
    new import_obsidian2.Setting(containerEl).setName("Select custom model file").setDesc(`File that ends with .onnx`).addText((component) => {
      component.setDisabled(true);
      component.setValue(this.plugin.settings.customModelFilePath);
    }).addExtraButton((component) => {
      component.setIcon("folder-open");
      component.setTooltip("Select model");
      component.onClick(() => {
        electron.remote.dialog.showOpenDialog({
          properties: ["openFile"],
          title: "Select a model"
        }).then((result) => {
          if (result.canceled) return;
          this.plugin.settings.customModelFilePath = result.filePaths[0];
          this.plugin.saveSettings();
          this.display();
        });
      });
    });
  }
  addSettingToSelectModelConfigFilePath(containerEl) {
    new import_obsidian2.Setting(containerEl).setName("Select model config file").setDesc(`File that ends with .json`).addText((component) => {
      component.setDisabled(true);
      component.setValue(this.plugin.settings.customModelConfigFilePath);
    }).addExtraButton((component) => {
      component.setIcon("folder-open");
      component.setTooltip("Select model config");
      component.onClick(() => {
        electron.remote.dialog.showOpenDialog({
          properties: ["openFile"],
          title: "Select a model config"
        }).then((result) => {
          if (result.canceled) return;
          this.plugin.settings.customModelConfigFilePath = result.filePaths[0];
          this.plugin.saveSettings();
          this.display();
        });
      });
    });
  }
  addSettingsToChooseWhetherToUseCustomModelOrDefault(containerEl) {
    new import_obsidian2.Setting(containerEl).setName("Use custom model?").setDesc(`Turn this on if you want to use different voice model. Check this doc to understand more: DOC LINK`).addToggle((component) => {
      component.setValue(this.plugin.settings.shouldUseCustomModel);
      component.onChange((value) => {
        this.plugin.settings.shouldUseCustomModel = value;
        this.plugin.saveSettings();
        this.display();
      });
    });
  }
  addSettingToSelectPiperExecutablePath(containerEl) {
    new import_obsidian2.Setting(containerEl).setName("Select Piper executable file").setDesc(`This is required`).addText((component) => {
      component.setDisabled(true);
      component.setValue(this.plugin.settings.piperExecutableFilePath);
    }).addExtraButton((component) => {
      component.setIcon("folder-open");
      component.setTooltip("Select piper executable");
      component.onClick(() => {
        electron.remote.dialog.showOpenDialog({
          properties: ["openFile"],
          title: "Select piper executable"
        }).then((result) => {
          if (result.canceled) return;
          this.plugin.settings.piperExecutableFilePath = result.filePaths[0];
          this.plugin.saveSettings();
          this.display();
        });
      });
    });
  }
};

// main.ts
var ListenUp = class extends import_obsidian3.Plugin {
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new SettingsTab(this.app, this));
    this.addCommand({
      id: "convert-text-to-speech",
      name: "Convert text to speech",
      editorCallback: async (editor, _) => {
        const notice = new import_obsidian3.Notice("\u{1F4AC}", 0);
        const basePath = getBasePath();
        const piperLocation = (0, import_obsidian3.normalizePath)(
          this.settings.piperExecutableFilePath
        );
        let modelPath = (0, import_obsidian3.normalizePath)(
          basePath + "/" + DEFAULT_SETTINGS.customModelFilePath
        );
        let modelConfigPath = (0, import_obsidian3.normalizePath)(
          basePath + "/" + DEFAULT_SETTINGS.customModelConfigFilePath
        );
        if (this.settings.shouldUseCustomModel) {
          modelPath = (0, import_obsidian3.normalizePath)(
            this.settings.customModelFilePath
          );
          modelConfigPath = (0, import_obsidian3.normalizePath)(
            this.settings.customModelConfigFilePath
          );
        }
        const piperCommand = `"${piperLocation}" --model "${modelPath}" --config "${modelConfigPath}" --output-raw --sentence_silence 0.5 --length_scale 1 | aplay -r 22000 -f S16_LE -t raw -`;
        let textToConvertToAudio = editor.getValue();
        const regExMatch = textToConvertToAudio.match(
          /{{listen}}([\s\S]*?){{\/listen}}/g
        );
        const userSelection = editor.getSelection();
        if (regExMatch !== null) {
          textToConvertToAudio = regExMatch.join(", ").replaceAll(/{{listen}}|{{\/listen}}/g, "");
        } else if (userSelection.length) {
          textToConvertToAudio = userSelection;
        }
        textToConvertToAudio = removeAllFormatting(
          textToConvertToAudio != null ? textToConvertToAudio : " ",
          {}
          // @ts-ignore
        ).replaceAll('"', '\\"');
        (0, import_child_process.exec)(
          `echo "${textToConvertToAudio}" | ${piperCommand}`,
          async (error) => {
            if (error) {
              console.error(`

error: ${error.message}`);
              notice.setMessage("\u{1F6AB} ");
              return;
            }
            setTimeout(() => {
              editor.setCursor(editor.lastLine());
              notice.hide();
            }, 200);
          }
        );
      }
    });
  }
  async onunload() {
  }
  // getRandomNumber(min:10000, max: 99999) {
  // 	return Math.floor(Math.random() * (max - min) + min);
  // }
  async loadSettings() {
    const data = await this.loadData() || {};
    this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
  }
  /**
   * Save data to disk, stored in data.json in plugin folder
   */
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJ1dGlscy9yZW1vdmVGb3JtYXR0aW5nLnRzIiwgInV0aWxzL3V0aWxzLnRzIiwgIlNldHRpbmdzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBub3JtYWxpemVQYXRoLCBOb3RpY2UsIFBsdWdpbiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgZXhlYyB9IGZyb20gXCJjaGlsZF9wcm9jZXNzXCI7XG5pbXBvcnQgeyByZW1vdmVBbGxGb3JtYXR0aW5nIH0gZnJvbSBcInV0aWxzL3JlbW92ZUZvcm1hdHRpbmdcIjtcbmltcG9ydCB7IGdldEJhc2VQYXRoIH0gZnJvbSBcInV0aWxzL3V0aWxzXCI7XG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTLCBTZXR0aW5nc1RhYiB9IGZyb20gXCJTZXR0aW5nc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXN0ZW5VcCBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBhbnk7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTZXR0aW5nc1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImNvbnZlcnQtdGV4dC10by1zcGVlY2hcIixcblx0XHRcdG5hbWU6IFwiQ29udmVydCB0ZXh0IHRvIHNwZWVjaFwiLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3IsIF8pID0+IHtcblx0XHRcdFx0Y29uc3Qgbm90aWNlID0gbmV3IE5vdGljZShcIlx1RDgzRFx1RENBQ1wiLCAwKTtcblxuXHRcdFx0XHRjb25zdCBiYXNlUGF0aCA9IGdldEJhc2VQYXRoKCk7XG5cdFx0XHRcdC8vIGNvbnN0IGN1cnJlbnRGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRcdFx0Ly8gY29uc3QgYXVkaW9GaWxlTmFtZSA9XG5cdFx0XHRcdC8vIFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHQvLyBcdGN1cnJlbnRGaWxlPy5uYW1lLnJlcGxhY2VBbGwoXCIgXCIsIFwiLVwiKSArXG5cdFx0XHRcdC8vIFx0XCItXCIgK1xuXHRcdFx0XHQvLyBcdHRoaXMuZ2V0UmFuZG9tTnVtYmVyKCkgK1xuXHRcdFx0XHQvLyBcdFwiLndhdlwiO1xuXG5cdFx0XHRcdGNvbnN0IHBpcGVyTG9jYXRpb24gPSBub3JtYWxpemVQYXRoKFxuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MucGlwZXJFeGVjdXRhYmxlRmlsZVBhdGgsXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGxldCBtb2RlbFBhdGggPSBub3JtYWxpemVQYXRoKFxuXHRcdFx0XHRcdGJhc2VQYXRoICsgXCIvXCIgKyBERUZBVUxUX1NFVFRJTkdTLmN1c3RvbU1vZGVsRmlsZVBhdGgsXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGxldCBtb2RlbENvbmZpZ1BhdGggPSBub3JtYWxpemVQYXRoKFxuXHRcdFx0XHRcdGJhc2VQYXRoICsgXCIvXCIgKyBERUZBVUxUX1NFVFRJTkdTLmN1c3RvbU1vZGVsQ29uZmlnRmlsZVBhdGgsXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0Ly8gY29uc3Qgb3V0cHV0RmlsZVBhdGggPSBub3JtYWxpemVQYXRoKFxuXHRcdFx0XHQvLyBcdGJhc2VQYXRoICsgXCIvXCIgKyBhdWRpb0ZpbGVOYW1lLFxuXHRcdFx0XHQvLyApO1xuXG5cdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnNob3VsZFVzZUN1c3RvbU1vZGVsKSB7XG5cdFx0XHRcdFx0bW9kZWxQYXRoID0gbm9ybWFsaXplUGF0aChcblx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuY3VzdG9tTW9kZWxGaWxlUGF0aCxcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdG1vZGVsQ29uZmlnUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG5cdFx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmN1c3RvbU1vZGVsQ29uZmlnRmlsZVBhdGgsXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCBwaXBlckNvbW1hbmQgPSBgXCIke3BpcGVyTG9jYXRpb259XCIgLS1tb2RlbCBcIiR7bW9kZWxQYXRofVwiIC0tY29uZmlnIFwiJHttb2RlbENvbmZpZ1BhdGh9XCIgLS1vdXRwdXQtcmF3IC0tc2VudGVuY2Vfc2lsZW5jZSAwLjUgLS1sZW5ndGhfc2NhbGUgMSB8IGFwbGF5IC1yIDIyMDAwIC1mIFMxNl9MRSAtdCByYXcgLWA7XG5cblx0XHRcdFx0Ly8gY29uc3QgcGlwZXJDb21tYW5kID0gYFwiJHtwaXBlckxvY2F0aW9ufVwiIC0tbW9kZWwgXCIke21vZGVsUGF0aH1cIiAtLWNvbmZpZyBcIiR7bW9kZWxDb25maWdQYXRofVwiIC0tb3V0cHV0X2ZpbGUgXCIke291dHB1dEZpbGVQYXRofVwiIC0tc2VudGVuY2Vfc2lsZW5jZSAwLjUgLS1sZW5ndGhfc2NhbGUgMWA7XG5cblx0XHRcdFx0bGV0IHRleHRUb0NvbnZlcnRUb0F1ZGlvID0gZWRpdG9yLmdldFZhbHVlKCk7XG5cdFx0XHRcdGNvbnN0IHJlZ0V4TWF0Y2ggPSB0ZXh0VG9Db252ZXJ0VG9BdWRpby5tYXRjaChcblx0XHRcdFx0XHQve3tsaXN0ZW59fShbXFxzXFxTXSo/KXt7XFwvbGlzdGVufX0vZyxcblx0XHRcdFx0KTtcblxuXHRcdFx0XHRjb25zdCB1c2VyU2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuXG5cdFx0XHRcdGlmIChyZWdFeE1hdGNoICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0dGV4dFRvQ29udmVydFRvQXVkaW8gPSByZWdFeE1hdGNoXG5cdFx0XHRcdFx0XHQuam9pbihcIiwgXCIpXG5cdFx0XHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdFx0XHQucmVwbGFjZUFsbCgve3tsaXN0ZW59fXx7e1xcL2xpc3Rlbn19L2csIFwiXCIpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHVzZXJTZWxlY3Rpb24ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0dGV4dFRvQ29udmVydFRvQXVkaW8gPSB1c2VyU2VsZWN0aW9uO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGV4dFRvQ29udmVydFRvQXVkaW8gPSByZW1vdmVBbGxGb3JtYXR0aW5nKFxuXHRcdFx0XHRcdHRleHRUb0NvbnZlcnRUb0F1ZGlvID8/IFwiIFwiLFxuXHRcdFx0XHRcdHt9LFxuXHRcdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0KS5yZXBsYWNlQWxsKCdcIicsICdcXFxcXCInKTtcblxuXHRcdFx0XHRleGVjKFxuXHRcdFx0XHRcdGBlY2hvIFwiJHt0ZXh0VG9Db252ZXJ0VG9BdWRpb31cIiB8ICR7cGlwZXJDb21tYW5kfWAsXG5cdFx0XHRcdFx0YXN5bmMgKGVycm9yKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihgXFxuXFxuZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcblx0XHRcdFx0XHRcdFx0bm90aWNlLnNldE1lc3NhZ2UoXCJcdUQ4M0RcdURFQUIgXCIpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIGF3YWl0IGN1cnJlbnRGaWxlPy52YXVsdC5hcHBlbmQoXG5cdFx0XHRcdFx0XHQvLyBcdGN1cnJlbnRGaWxlLFxuXHRcdFx0XHRcdFx0Ly8gXHRgIVtbJHthdWRpb0ZpbGVOYW1lfV1dIFxcblxcbmAsXG5cdFx0XHRcdFx0XHQvLyApO1xuXG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcihlZGl0b3IubGFzdExpbmUoKSk7XG5cdFx0XHRcdFx0XHRcdG5vdGljZS5oaWRlKCk7XG5cdFx0XHRcdFx0XHR9LCAyMDApO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdCk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXHR9XG5cblx0YXN5bmMgb251bmxvYWQoKSB7XG5cdFx0Ly8gUmVsZWFzZSBhbnkgcmVzb3VyY2VzIGNvbmZpZ3VyZWQgYnkgdGhlIHBsdWdpbi5cblx0fVxuXG5cdC8vIGdldFJhbmRvbU51bWJlcihtaW46MTAwMDAsIG1heDogOTk5OTkpIHtcblx0Ly8gXHRyZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW4pO1xuXHQvLyB9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdGNvbnN0IGRhdGEgPSAoYXdhaXQgdGhpcy5sb2FkRGF0YSgpKSB8fCB7fTtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgZGF0YSk7XG5cdH1cblxuXHQvKipcblx0ICogU2F2ZSBkYXRhIHRvIGRpc2ssIHN0b3JlZCBpbiBkYXRhLmpzb24gaW4gcGx1Z2luIGZvbGRlclxuXHQgKi9cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cbn1cbiIsICJleHBvcnQgZnVuY3Rpb24gcmVtb3ZlQWxsRm9ybWF0dGluZyhtZDogc3RyaW5nLCBvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KSB7XG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRvcHRpb25zLmxpc3RVbmljb2RlQ2hhciA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2xpc3RVbmljb2RlQ2hhcicpID8gb3B0aW9ucy5saXN0VW5pY29kZUNoYXIgOiBmYWxzZTtcblx0b3B0aW9ucy5zdHJpcExpc3RMZWFkZXJzID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnc3RyaXBMaXN0TGVhZGVycycpID8gb3B0aW9ucy5zdHJpcExpc3RMZWFkZXJzIDogdHJ1ZTtcblx0b3B0aW9ucy5nZm0gPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdnZm0nKSA/IG9wdGlvbnMuZ2ZtIDogdHJ1ZTtcblx0b3B0aW9ucy51c2VJbWdBbHRUZXh0ID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgndXNlSW1nQWx0VGV4dCcpID8gb3B0aW9ucy51c2VJbWdBbHRUZXh0IDogdHJ1ZTtcblx0b3B0aW9ucy5hYmJyID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnYWJicicpID8gb3B0aW9ucy5hYmJyIDogZmFsc2U7XG5cdG9wdGlvbnMucmVwbGFjZUxpbmtzV2l0aFVSTCA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3JlcGxhY2VMaW5rc1dpdGhVUkwnKSA/IG9wdGlvbnMucmVwbGFjZUxpbmtzV2l0aFVSTCA6IGZhbHNlO1xuXHRvcHRpb25zLmh0bWxUYWdzVG9Ta2lwID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnaHRtbFRhZ3NUb1NraXAnKSA/IG9wdGlvbnMuaHRtbFRhZ3NUb1NraXAgOiBbXTtcblxuXHRsZXQgb3V0cHV0ID0gbWQgfHwgJyc7XG5cblx0Ly8gUmVtb3ZlIGhvcml6b250YWwgcnVsZXMgKHN0cmlwTGlzdEhlYWRlcnMgY29uZmxpY3Qgd2l0aCB0aGlzIHJ1bGUsIHdoaWNoIGlzIHdoeSBpdCBoYXMgYmVlbiBtb3ZlZCB0byB0aGUgdG9wKVxuXHRvdXRwdXQgPSBvdXRwdXQucmVwbGFjZSgvXigtXFxzKj98XFwqXFxzKj98X1xccyo/KXszLH1cXHMqL2dtLCAnJyk7XG5cblx0dHJ5IHtcblx0XHRpZiAob3B0aW9ucy5zdHJpcExpc3RMZWFkZXJzKSB7XG5cdFx0XHRpZiAob3B0aW9ucy5saXN0VW5pY29kZUNoYXIpXG5cdFx0XHRcdG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKC9eKFtcXHNcXHRdKikoW1xcKlxcLVxcK118XFxkK1xcLilcXHMrL2dtLCBvcHRpb25zLmxpc3RVbmljb2RlQ2hhciArICcgJDEnKTtcblx0XHRcdGVsc2Vcblx0XHRcdFx0b3V0cHV0ID0gb3V0cHV0LnJlcGxhY2UoL14oW1xcc1xcdF0qKShbXFwqXFwtXFwrXXxcXGQrXFwuKVxccysvZ20sICckMScpO1xuXHRcdH1cblx0XHRpZiAob3B0aW9ucy5nZm0pIHtcblx0XHRcdG91dHB1dCA9IG91dHB1dFxuXHRcdFx0XHQvLyBIZWFkZXJcblx0XHRcdFx0LnJlcGxhY2UoL1xcbj17Mix9L2csICdcXG4nKVxuXHRcdFx0XHQvLyBGZW5jZWQgY29kZWJsb2Nrc1xuXHRcdFx0XHQucmVwbGFjZSgvfnszfS4qXFxuL2csICcnKVxuXHRcdFx0XHQvLyBTdHJpa2V0aHJvdWdoXG5cdFx0XHRcdC5yZXBsYWNlKC9+fi9nLCAnJylcblx0XHRcdFx0Ly8gRmVuY2VkIGNvZGVibG9ja3Ncblx0XHRcdFx0LnJlcGxhY2UoL2B7M30uKlxcbi9nLCAnJyk7XG5cdFx0fVxuXHRcdGlmIChvcHRpb25zLmFiYnIpIHtcblx0XHRcdC8vIFJlbW92ZSBhYmJyZXZpYXRpb25zXG5cdFx0XHRvdXRwdXQgPSBvdXRwdXQucmVwbGFjZSgvXFwqXFxbLipcXF06LipcXG4vLCAnJyk7XG5cdFx0fVxuXHRcdG91dHB1dCA9IG91dHB1dFxuXHRcdFx0Ly8gUmVtb3ZlIEhUTUwgdGFnc1xuXHRcdFx0LnJlcGxhY2UoLzxbXj5dKj4vZywgJycpXG5cblx0XHRsZXQgaHRtbFJlcGxhY2VSZWdleCA9IG5ldyBSZWdFeHAoJzxbXj5dKj4nLCAnZycpO1xuXHRcdGlmIChvcHRpb25zLmh0bWxUYWdzVG9Ta2lwLmxlbmd0aCA+IDApIHtcblx0XHRcdC8vIFVzaW5nIG5lZ2F0aXZlIGxvb2thaGVhZC4gRWcuICg/IXN1cHxzdWIpIHdpbGwgbm90IG1hdGNoICdzdXAnIGFuZCAnc3ViJyB0YWdzLlxuXHRcdFx0Y29uc3Qgam9pbmVkSHRtbFRhZ3NUb1NraXAgPSAnKD8hJyArIG9wdGlvbnMuaHRtbFRhZ3NUb1NraXAuam9pbihcInxcIikgKyAnKSc7XG5cblx0XHRcdC8vIEFkZGluZyB0aGUgbG9va2FoZWFkIGxpdGVyYWwgd2l0aCB0aGUgZGVmYXVsdCByZWdleCBmb3IgaHRtbC4gRWcuLzwoPyFzdXB8c3ViKVtePl0qPi9pZ1xuXHRcdFx0aHRtbFJlcGxhY2VSZWdleCA9IG5ldyBSZWdFeHAoXG5cdFx0XHRcdCc8JyArXG5cdFx0XHRcdGpvaW5lZEh0bWxUYWdzVG9Ta2lwICtcblx0XHRcdFx0J1tePl0qPicsXG5cdFx0XHRcdCdpZydcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0b3V0cHV0ID0gb3V0cHV0XG5cdFx0XHQvLyBSZW1vdmUgSFRNTCB0YWdzXG5cdFx0XHQucmVwbGFjZShodG1sUmVwbGFjZVJlZ2V4LCAnJylcblx0XHRcdC8vIFJlbW92ZSBzZXRleHQtc3R5bGUgaGVhZGVyc1xuXHRcdFx0LnJlcGxhY2UoL15bPVxcLV17Mix9XFxzKiQvZywgJycpXG5cdFx0XHQvLyBSZW1vdmUgZm9vdG5vdGVzP1xuXHRcdFx0LnJlcGxhY2UoL1xcW1xcXi4rP1xcXShcXDogLio/JCk/L2csICcnKVxuXHRcdFx0LnJlcGxhY2UoL1xcc3swLDJ9XFxbLio/XFxdOiAuKj8kL2csICcnKVxuXHRcdFx0Ly8gUmVtb3ZlIGltYWdlc1xuXHRcdFx0LnJlcGxhY2UoL1xcIVxcWyguKj8pXFxdW1xcW1xcKF0uKj9bXFxdXFwpXS9nLCBvcHRpb25zLnVzZUltZ0FsdFRleHQgPyAnJDEnIDogJycpXG5cdFx0XHQvLyBSZW1vdmUgaW5saW5lIGxpbmtzXG5cdFx0XHQucmVwbGFjZSgvXFxbKFteXFxdXSo/KVxcXVtcXFtcXChdLio/W1xcXVxcKV0vZywgb3B0aW9ucy5yZXBsYWNlTGlua3NXaXRoVVJMID8gJyQyJyA6ICckMScpXG5cdFx0XHQvLyBSZW1vdmUgYmxvY2txdW90ZXNcblx0XHRcdC5yZXBsYWNlKC9eKFxcbik/XFxzezAsM30+XFxzPy9nbSwgJyQxJylcblx0XHRcdC8vIC5yZXBsYWNlKC8oXnxcXG4pXFxzezAsM30+XFxzPy9nLCAnXFxuXFxuJylcblx0XHRcdC8vIFJlbW92ZSByZWZlcmVuY2Utc3R5bGUgbGlua3M/XG5cdFx0XHQucmVwbGFjZSgvXlxcc3sxLDJ9XFxbKC4qPylcXF06IChcXFMrKSggXCIuKj9cIik/XFxzKiQvZywgJycpXG5cdFx0XHQvLyBSZW1vdmUgYXR4LXN0eWxlIGhlYWRlcnNcblx0XHRcdC5yZXBsYWNlKC9eKFxcbik/XFxzezAsfSN7MSw2fVxccyooICguKykpPyArIyskfF4oXFxuKT9cXHN7MCx9I3sxLDZ9XFxzKiggKC4rKSk/JC9nbSwgJyQxJDMkNCQ2Jylcblx0XHRcdC8vIFJlbW92ZSAqIGVtcGhhc2lzXG5cdFx0XHQucmVwbGFjZSgvKFtcXCpdKykoXFxTKSguKj9cXFMpPz9cXDEvZywgJyQyJDMnKVxuXHRcdFx0Ly8gUmVtb3ZlIF8gZW1waGFzaXMuIFVubGlrZSAqLCBfIGVtcGhhc2lzIGdldHMgcmVuZGVyZWQgb25seSBpZiBcblx0XHRcdC8vICAgMS4gRWl0aGVyIHRoZXJlIGlzIGEgd2hpdGVzcGFjZSBjaGFyYWN0ZXIgYmVmb3JlIG9wZW5pbmcgXyBhbmQgYWZ0ZXIgY2xvc2luZyBfLlxuXHRcdFx0Ly8gICAyLiBPciBfIGlzIGF0IHRoZSBzdGFydC9lbmQgb2YgdGhlIHN0cmluZy5cblx0XHRcdC5yZXBsYWNlKC8oXnxcXFcpKFtfXSspKFxcUykoLio/XFxTKT8/XFwyKCR8XFxXKS9nLCAnJDEkMyQ0JDUnKVxuXHRcdFx0Ly8gUmVtb3ZlIGNvZGUgYmxvY2tzXG5cdFx0XHQucmVwbGFjZSgvKGB7Myx9KSguKj8pXFwxL2dtLCAnJDInKVxuXHRcdFx0Ly8gUmVtb3ZlIGlubGluZSBjb2RlXG5cdFx0XHQucmVwbGFjZSgvYCguKz8pYC9nLCAnJDEnKVxuXHRcdFx0Ly8gLy8gUmVwbGFjZSB0d28gb3IgbW9yZSBuZXdsaW5lcyB3aXRoIGV4YWN0bHkgdHdvPyBOb3QgZW50aXJlbHkgc3VyZSB0aGlzIGJlbG9uZ3MgaGVyZS4uLlxuXHRcdFx0Ly8gLnJlcGxhY2UoL1xcbnsyLH0vZywgJ1xcblxcbicpXG5cdFx0XHQvLyAvLyBSZW1vdmUgbmV3bGluZXMgaW4gYSBwYXJhZ3JhcGhcblx0XHRcdC8vIC5yZXBsYWNlKC8oXFxTKylcXG5cXHMqKFxcUyspL2csICckMSAkMicpXG5cdFx0XHQvLyBSZXBsYWNlIHN0cmlrZSB0aHJvdWdoXG5cdFx0XHQucmVwbGFjZSgvfiguKj8pfi9nLCAnJDEnKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGNvbnNvbGUuZXJyb3IoZSk7XG5cdFx0cmV0dXJuIG1kO1xuXHR9XG5cdHJldHVybiBvdXRwdXQ7XG59O1xuIiwgImltcG9ydCB7IEZpbGVTeXN0ZW1BZGFwdGVyIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRCYXNlUGF0aCgpIHtcblx0bGV0IGFkYXB0ZXIgPSB0aGlzLmFwcC52YXVsdC5hZGFwdGVyO1xuXHRpZiAoYWRhcHRlciBpbnN0YW5jZW9mIEZpbGVTeXN0ZW1BZGFwdGVyKSB7XG5cdFx0cmV0dXJuIGFkYXB0ZXIuZ2V0QmFzZVBhdGgoKTtcblx0fVxuXHRyZXR1cm4gXCJ+L1wiO1xufVxuIiwgImltcG9ydCBMaXN0ZW5VcCBmcm9tIFwibWFpblwiO1xuaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBub3JtYWxpemVQYXRoIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGlzdGVuVXBTZXR0aW5nc1RhYiB7XG5cdGN1c3RvbU1vZGVsRmlsZVBhdGg6IHN0cmluZztcblx0Y3VzdG9tTW9kZWxDb25maWdGaWxlUGF0aDogc3RyaW5nO1xuXHRwaXBlckV4ZWN1dGFibGVGaWxlUGF0aDogc3RyaW5nO1xuXHRzaG91bGRVc2VDdXN0b21Nb2RlbDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IExpc3RlblVwU2V0dGluZ3NUYWIgPSB7XG5cdGN1c3RvbU1vZGVsRmlsZVBhdGg6IFwiXCIsXG5cdGN1c3RvbU1vZGVsQ29uZmlnRmlsZVBhdGg6IFwiXCIsXG5cdHBpcGVyRXhlY3V0YWJsZUZpbGVQYXRoOiBcIlwiLFxuXHRzaG91bGRVc2VDdXN0b21Nb2RlbDogdHJ1ZSxcbn07XG5cbmV4cG9ydCBjbGFzcyBTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IExpc3RlblVwO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IExpc3RlblVwKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpIHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHR0aGlzLmFkZFNldHRpbmdUb1NlbGVjdFBpcGVyRXhlY3V0YWJsZVBhdGgoY29udGFpbmVyRWwpO1xuXHRcdC8vIHRoaXMuYWRkU2V0dGluZ3NUb0Nob29zZVdoZXRoZXJUb1VzZUN1c3RvbU1vZGVsT3JEZWZhdWx0KGNvbnRhaW5lckVsKTtcblx0XHQvLyBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvdWxkVXNlQ3VzdG9tTW9kZWwpIHtcblx0XHRcdHRoaXMuYWRkU2V0dGluZ1RvU2VsZWN0TW9kZWxGaWxlUGF0aChjb250YWluZXJFbCk7XG5cdFx0XHR0aGlzLmFkZFNldHRpbmdUb1NlbGVjdE1vZGVsQ29uZmlnRmlsZVBhdGgoY29udGFpbmVyRWwpO1xuXHRcdC8vIH1cblx0fVxuXG5cdGFkZFNldHRpbmdUb1NlbGVjdE1vZGVsRmlsZVBhdGgoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlNlbGVjdCBjdXN0b20gbW9kZWwgZmlsZVwiKVxuXHRcdFx0LnNldERlc2MoYEZpbGUgdGhhdCBlbmRzIHdpdGggLm9ubnhgKVxuXHRcdFx0LmFkZFRleHQoKGNvbXBvbmVudCkgPT4ge1xuXHRcdFx0XHRjb21wb25lbnQuc2V0RGlzYWJsZWQodHJ1ZSk7XG5cdFx0XHRcdGNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21Nb2RlbEZpbGVQYXRoKTtcblx0XHRcdH0pXG5cdFx0XHQuYWRkRXh0cmFCdXR0b24oKGNvbXBvbmVudCkgPT4ge1xuXHRcdFx0XHRjb21wb25lbnQuc2V0SWNvbihcImZvbGRlci1vcGVuXCIpO1xuXHRcdFx0XHRjb21wb25lbnQuc2V0VG9vbHRpcChcIlNlbGVjdCBtb2RlbFwiKTtcblxuXHRcdFx0XHRjb21wb25lbnQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRcdGVsZWN0cm9uLnJlbW90ZS5kaWFsb2dcblx0XHRcdFx0XHRcdC5zaG93T3BlbkRpYWxvZyh7XG5cdFx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IFtcIm9wZW5GaWxlXCJdLFxuXHRcdFx0XHRcdFx0XHR0aXRsZTogXCJTZWxlY3QgYSBtb2RlbFwiLFxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdC50aGVuKChyZXN1bHQ6IGFueSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZiAocmVzdWx0LmNhbmNlbGVkKSByZXR1cm47XG5cblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tTW9kZWxGaWxlUGF0aCA9IHJlc3VsdC5maWxlUGF0aHNbMF07XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHR9XG5cblx0YWRkU2V0dGluZ1RvU2VsZWN0TW9kZWxDb25maWdGaWxlUGF0aChjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiU2VsZWN0IG1vZGVsIGNvbmZpZyBmaWxlXCIpXG5cdFx0XHQuc2V0RGVzYyhgRmlsZSB0aGF0IGVuZHMgd2l0aCAuanNvbmApXG5cdFx0XHQuYWRkVGV4dCgoY29tcG9uZW50KSA9PiB7XG5cdFx0XHRcdGNvbXBvbmVudC5zZXREaXNhYmxlZCh0cnVlKTtcblx0XHRcdFx0Y29tcG9uZW50LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbU1vZGVsQ29uZmlnRmlsZVBhdGgpO1xuXHRcdFx0fSlcblx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PiB7XG5cdFx0XHRcdGNvbXBvbmVudC5zZXRJY29uKFwiZm9sZGVyLW9wZW5cIik7XG5cdFx0XHRcdGNvbXBvbmVudC5zZXRUb29sdGlwKFwiU2VsZWN0IG1vZGVsIGNvbmZpZ1wiKTtcblxuXHRcdFx0XHRjb21wb25lbnQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRcdGVsZWN0cm9uLnJlbW90ZS5kaWFsb2dcblx0XHRcdFx0XHRcdC5zaG93T3BlbkRpYWxvZyh7XG5cdFx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IFtcIm9wZW5GaWxlXCJdLFxuXHRcdFx0XHRcdFx0XHR0aXRsZTogXCJTZWxlY3QgYSBtb2RlbCBjb25maWdcIixcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQudGhlbigocmVzdWx0OiBhbnkpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKHJlc3VsdC5jYW5jZWxlZCkgcmV0dXJuO1xuXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbU1vZGVsQ29uZmlnRmlsZVBhdGggPSByZXN1bHQuZmlsZVBhdGhzWzBdO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0fVxuXG5cdGFkZFNldHRpbmdzVG9DaG9vc2VXaGV0aGVyVG9Vc2VDdXN0b21Nb2RlbE9yRGVmYXVsdChjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiVXNlIGN1c3RvbSBtb2RlbD9cIilcblx0XHRcdC5zZXREZXNjKGBUdXJuIHRoaXMgb24gaWYgeW91IHdhbnQgdG8gdXNlIGRpZmZlcmVudCB2b2ljZSBtb2RlbC4gQ2hlY2sgdGhpcyBkb2MgdG8gdW5kZXJzdGFuZCBtb3JlOiBET0MgTElOS2ApXG5cdFx0XHQuYWRkVG9nZ2xlKChjb21wb25lbnQpID0+IHtcblx0XHRcdFx0Y29tcG9uZW50LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3VsZFVzZUN1c3RvbU1vZGVsKTtcblx0XHRcdFx0Y29tcG9uZW50Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3VsZFVzZUN1c3RvbU1vZGVsID0gdmFsdWU7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0dGhpcy5kaXNwbGF5KClcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0fVxuXG5cdGFkZFNldHRpbmdUb1NlbGVjdFBpcGVyRXhlY3V0YWJsZVBhdGgoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlNlbGVjdCBQaXBlciBleGVjdXRhYmxlIGZpbGVcIilcblx0XHRcdC5zZXREZXNjKGBUaGlzIGlzIHJlcXVpcmVkYClcblx0XHRcdC5hZGRUZXh0KChjb21wb25lbnQpID0+IHtcblx0XHRcdFx0Y29tcG9uZW50LnNldERpc2FibGVkKHRydWUpO1xuXHRcdFx0XHRjb21wb25lbnQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucGlwZXJFeGVjdXRhYmxlRmlsZVBhdGgpO1xuXHRcdFx0fSlcblx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PiB7XG5cdFx0XHRcdGNvbXBvbmVudC5zZXRJY29uKFwiZm9sZGVyLW9wZW5cIik7XG5cdFx0XHRcdGNvbXBvbmVudC5zZXRUb29sdGlwKFwiU2VsZWN0IHBpcGVyIGV4ZWN1dGFibGVcIik7XG5cdFx0XHRcdGNvbXBvbmVudC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdFx0ZWxlY3Ryb24ucmVtb3RlLmRpYWxvZ1xuXHRcdFx0XHRcdFx0LnNob3dPcGVuRGlhbG9nKHtcblx0XHRcdFx0XHRcdFx0cHJvcGVydGllczogW1wib3BlbkZpbGVcIl0sXG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcIlNlbGVjdCBwaXBlciBleGVjdXRhYmxlXCIsXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0LnRoZW4oKHJlc3VsdDogYW55KSA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmIChyZXN1bHQuY2FuY2VsZWQpIHJldHVybjtcblxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5waXBlckV4ZWN1dGFibGVGaWxlUGF0aCA9IHJlc3VsdC5maWxlUGF0aHNbMF07XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHR9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQThDO0FBQzlDLDJCQUFxQjs7O0FDRGQsU0FBUyxvQkFBb0IsSUFBWSxTQUFpQztBQUNoRixZQUFVLFdBQVcsQ0FBQztBQUN0QixVQUFRLGtCQUFrQixRQUFRLGVBQWUsaUJBQWlCLElBQUksUUFBUSxrQkFBa0I7QUFDaEcsVUFBUSxtQkFBbUIsUUFBUSxlQUFlLGtCQUFrQixJQUFJLFFBQVEsbUJBQW1CO0FBQ25HLFVBQVEsTUFBTSxRQUFRLGVBQWUsS0FBSyxJQUFJLFFBQVEsTUFBTTtBQUM1RCxVQUFRLGdCQUFnQixRQUFRLGVBQWUsZUFBZSxJQUFJLFFBQVEsZ0JBQWdCO0FBQzFGLFVBQVEsT0FBTyxRQUFR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QTtBQUFBLFNBQWMsTUFBTSxPQUFPLEVBQUU7QUFDM0MscUJBQU8sV0FBVyxZQUFLO0FBQ3ZCO0FBQUEsWUFDRDtBQU9BLHVCQUFXLE1BQU07QUFDaEIscUJBQU8sVUFBVSxPQUFPLFNBQVMsQ0FBQztBQUNsQyxxQkFBTyxLQUFLO0FBQUEsWUFDYixHQUFHLEdBQUc7QUFBQSxVQUNQO0FBQUEsUUFDRDtBQUFBLE1BQ0Q7QUFBQSxJQUNELENBQUM7QUFBQSxFQUNGO0FBQUEsRUFFQSxNQUFNLFdBQVc7QUFBQSxFQUVqQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsTUFBTSxlQUFlO0FBQ3BCLFVBQU0sT0FBUSxNQUFNLEtBQUssU0FBUyxLQUFNLENBQUM7QUFDekMsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLElBQUk7QUFBQSxFQUN6RDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBTSxlQUFlO0FBQ3BCLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLEVBQ2xDO0FBQ0Q7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iXQp9Cg==
